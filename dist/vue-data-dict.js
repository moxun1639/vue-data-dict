/*!
 * vue-data-dict v1.1.0
 * Â© 2020-2022 Moxun<mxnstrive@gmail.com>
 * Released under the Apache-2.0 License.
 */
this.VueDataDict=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e,r){(function(t){!function(e){var r=function(t){return o(!0===t,!1,arguments)};function n(t,e){if("object"!==i(t))return e;for(var r in e)"object"===i(t[r])&&"object"===i(e[r])?t[r]=n(t[r],e[r]):t[r]=e[r];return t}function o(t,e,o){var a=o[0],u=o.length;(t||"object"!==i(a))&&(a={});for(var c=0;c<u;++c){var l=o[c];if("object"===i(l))for(var f in l)if("__proto__"!==f){var s=t?r.clone(l[f]):l[f];a[f]=e?n(a[f],s):s}}return a}function i(t){return{}.toString.call(t).slice(8,-1).toLowerCase()}r.recursive=function(t){return o(!0===t,!0,arguments)},r.clone=function(t){var e,n,o=t,a=i(t);if("array"===a)for(o=[],n=t.length,e=0;e<n;++e)o[e]=r.clone(t[e]);else if("object"===a)for(e in o={},t)o[e]=r.clone(t[e]);return o},e?t.exports=r:window.merge=r}(t&&"object"==typeof t.exports&&t.exports)}).call(this,r(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";r.r(e);var n=r(0),o=r.n(n),i={metas:{"*":{request:function(t){return console.log("load dict ".concat(t.type)),Promise.resolve([])},responseConverter:function(t,e){var r="[object Array]"===Object.prototype.toString.call(t.content)?t.content:[t];if(void 0===r)return console.warn('no dict data of "'.concat(e.type,'" found in the response')),[];return r.map((function(t){return p(t,e)}))},labelField:"label",valueField:"value"}},DEFAULT_LABEL_FIELDS:["label","name","title"],DEFAULT_VALUE_FIELDS:["value","id","uid","key"]};var a=i;function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===u(i)?i:String(i)),n)}var o,i}function l(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var f=l((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.label=e,this.value=r,this.raw=n}));function s(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=function(t,e){var r=d.apply(void 0,[t,e.labelField].concat(s(a.DEFAULT_LABEL_FIELDS))),n=d.apply(void 0,[t,e.valueField].concat(s(a.DEFAULT_VALUE_FIELDS)));return new f(t[r],t[n],t)};function d(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.find((function(e){return Object.prototype.hasOwnProperty.call(t,e)}))}var b={Vue:null};function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===v(i)?i:String(i)),n)}var o,i}function h(t,e,r){return e&&m(t.prototype,e),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var g=h((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.type,this.request=e.request,this.responseConverter=e.responseConverter,this.labelField=e.labelField,this.valueField=e.valueField,this.lazy=!0===e.lazy}));function S(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===w(i)?i:String(i)),n)}var o,i}g.parse=function(t){var e=null;return"string"==typeof t?(e=a.metas[t]||{}).type=t:"object"===v(t)&&(e=t),e=o.a.recursive(!0,a.metas["*"],a.metas[e.type],e),new g(e)};var P={types:[]},E=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.label={},this.dict={}}var e,r,n;return e=t,(r=[{key:"init",value:function(t){var e=this;t instanceof Array&&(t={types:t});var r=o.a.recursive({},P,t);this._dictMetas=[];var n=[];return r.types.forEach((function(t){n.push(e.register(t))})),Promise.all(n)}},{key:"register",value:function(t){var e=g.parse(t);this._dictMetas.push(e);var r=e.type;if(b.Vue.set(this.label,r,{}),b.Vue.set(this.dict,r,[]),!e.lazy)return _(this,e)}},{key:"wait",value:function(t){var e=this,r=this.dict[t];if(!r)return Promise.reject("no such dict: "+t);var n=r.loader;return n?n.then((function(){return e.dict[t]})):Promise.resolve(this.dict[t])}},{key:"reload",value:function(t){var e=this._dictMetas.find((function(e){return e.type===t}));return void 0===e?Promise.reject("the dict meta of ".concat(t," was not found")):_(this,e)}}])&&A(e.prototype,r),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t,e){var r=e.request(e);r instanceof Promise||(r=Promise.resolve(r));var n=r.then((function(r){var n,o=e.type,i=e.responseConverter(r,e);return i instanceof Array?i.filter((function(t){return t instanceof f})).length!==i.length&&(console.error("the type of elements in dicts must be DictData"),i=[]):(console.error("the return of responseConverter must be Array.<DictData>"),i=[]),(n=t.dict[o]).splice.apply(n,[0,Number.MAX_SAFE_INTEGER].concat(S(i))),i.forEach((function(e){b.Vue.set(t.label[o],e.value,e.label)})),i}));return t.dict[e.type].loader=n,n.finally((function(){delete t.dict[e.type].loader}))}e.default={name:"vue-data-dict",DictConverter:p,install:function(t,e){var r;b.Vue=t,r=e,o.a.recursive(i,r),t.mixin({data:function(){return void 0===this.$options.dicts||null===this.$options.dicts?{}:{dict:new E}},created:function(){var t=this;this.dict instanceof E&&(this.dict.owner=this,e.onCreated&&e.onCreated(this.dict),this.dict.init(this.$options.dicts).then((function(){e.onReady&&e.onReady(t.dict),t.$nextTick((function(){t.$emit("dictReady",t.dict),t.$options.methods&&t.$options.methods.onDictReady instanceof Function&&t.$options.methods.onDictReady.call(t,t.dict)}))})))}})}}}]).default;