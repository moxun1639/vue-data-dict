/*!
 * vue-data-dict v1.2.1
 * Â© 2020-2023 Moxun<mxnstrive@gmail.com>
 * Released under the Apache-2.0 License.
 */
this.VueDataDict=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return r.forEach((function(e){!function(t,e){for(var r in e)null!==t[r]&&void 0!==t[r]||(t[r]=e[r]),"[object Object]"===Object.prototype.toString.call(t[r])?n(t[r],e[r]):t[r]=e[r]}(t,e)})),t}r.r(e);var o={recursive:n},i={metas:{"*":{request:function(t){return console.log("load dict ".concat(t.type)),Promise.resolve([])},responseConverter:function(t,e){var r="[object Array]"===Object.prototype.toString.call(t.content)?t.content:[t];if(void 0===r)return console.warn('no dict data of "'.concat(e.type,'" found in the response')),[];return r.map((function(t){return p(t,e)}))},labelField:"label",valueField:"value"}},DEFAULT_LABEL_FIELDS:["label","name","title"],DEFAULT_VALUE_FIELDS:["value","id","uid","key"]};var a=i;function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===u(i)?i:String(i)),n)}var o,i}function l(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var f=l((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.label=e,this.value=r,this.raw=n}));function s(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=function(t,e){var r=d.apply(void 0,[t,e.labelField].concat(s(a.DEFAULT_LABEL_FIELDS))),n=d.apply(void 0,[t,e.valueField].concat(s(a.DEFAULT_VALUE_FIELDS)));return new f(t[r],t[n],t)};function d(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.find((function(e){return Object.prototype.hasOwnProperty.call(t,e)}))}var v={Vue:null};function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===b(i)?i:String(i)),n)}var o,i}function h(t,e,r){return e&&m(t.prototype,e),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var S=h((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.type,this.request=e.request,this.responseConverter=e.responseConverter,this.labelField=e.labelField,this.valueField=e.valueField,this.lazy=!0===e.lazy}));function g(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==j(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===j(i)?i:String(i)),n)}var o,i}S.parse=function(t){var e=o.recursive({},a.metas["*"]);return"string"==typeof t?(e.type=t,o.recursive(e,a.metas[t])):"object"===b(t)&&o.recursive(e,a.metas[t.type],t),new S(e)};var E={types:[]},P=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.label={},this.dict={}}var e,r,n;return e=t,(r=[{key:"init",value:function(t){var e=this;t instanceof Array&&(t={types:t});var r=o.recursive({},E,t);this._dictMetas=[];var n=[];return r.types.forEach((function(t){n.push(e.register(t))})),Promise.all(n)}},{key:"register",value:function(t){var e=S.parse(t);this._dictMetas.push(e);var r=e.type;if(v.Vue.set(this.label,r,{}),v.Vue.set(this.dict,r,[]),!e.lazy)return O(this,e)}},{key:"wait",value:function(t){var e=this,r=this.dict[t];if(!r)return Promise.reject("no such dict: "+t);var n=r.loader;return n?n.then((function(){return e.dict[t]})):Promise.resolve(this.dict[t])}},{key:"reload",value:function(t){var e=this._dictMetas.find((function(e){return e.type===t}));return void 0===e?Promise.reject("the dict meta of ".concat(t," was not found")):O(this,e)}}])&&A(e.prototype,r),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t,e){var r=e.request(e);r instanceof Promise||(r=Promise.resolve(r));var n=r.then((function(r){var n,o=e.type,i=e.responseConverter(r,e);i instanceof Array?i.filter((function(t){return t instanceof f})).length!==i.length&&(console.error("the type of elements in dicts must be DictData"),i=[]):(console.error("the return of responseConverter must be Array.<DictData>"),i=[]),(n=t.dict[o]).splice.apply(n,[0,Number.MAX_SAFE_INTEGER].concat(g(i)));var a=v.Vue,u=t.label[o],c={};for(var l in u)c[l]=0;for(var s in i.forEach((function(t){a.set(u,t.value,t.label),delete c[t.value]})),c)a.delete(u,s);return i}));return t.dict[e.type].loader=n,n.finally((function(){delete t.dict[e.type].loader}))}e.default={name:"vue-data-dict",DictConverter:p,install:function(t,e){var r;v.Vue=t,r=e,o.recursive(i,r),t.mixin({data:function(){return this.$options&&void 0!==this.$options.dicts&&null!==this.$options.dicts?{dict:new P}:{}},created:function(){var t=this;this.dict instanceof P&&(this.dict.owner=this,e.onCreated&&e.onCreated(this.dict),this.dict.init(this.$options.dicts).then((function(){e.onReady&&e.onReady(t.dict),t.$nextTick((function(){t.$emit("dictReady",t.dict),t.$options.methods&&t.$options.methods.onDictReady instanceof Function&&t.$options.methods.onDictReady.call(t,t.dict)}))})))}})}}}]).default;